<form class="weapons-form">

<div class="weapon-container">
	<div class="weapon-image">
		<img class="weapon-img" src="{{item.img}}" title="{{item.name}}" data-edit="img"/>
		<div class="roll-button-container">
			<button test-roll class="btn btn-vitals">Roll</button>
		</div>
	</div>

	<div class="weapon-title">
		<div class="grid-child">
			<div class="gen-header">
				<input class="input-text input-wide"  name="name" value="{{ item.name }}">
			</div>

			<section class="table">
				<div class="row">
					<div class="col">Base Dmg</div>
					<div class="col-left-align">
						<input class="input-text input-medium" name="data.dmg" value="{{ data.dmg }}">
					</div>
					<div class="col row-leader">Range</div>
					<div class="col-left-align">
						<input type="number" value="{{data.range}}" name="data.range" class="input-number">
					</div>
				</div>

				<div class="row">
					<div class="col">Hands</div>
					<div class="col-left-align">
						<select class="input-text input-medium" name="data.hands">
							{{#select data.hands }}
							<option value="1">1-Handed</option>
							<option value="2">2-Handed</option>
							<option value="0">Hands Free</option>
							{{/select}}
						</select>
					</div>

					<div class="col row-leader">Dice Bonus</div>
					<div class="col-left-align">
						<input type="number" class="input-number" value="{{data.diceBonus}}" name="data.diceBonus">
					</div>
				</div>

				<div class="row">
					<div class="col">Type</div>
					<div class="col-left-align">
						<select class="input-text input-medium" name="data.weaponType">
							{{#select data.weaponType }}
							<option value=""></option>
							<option value="martial">Martial</option>
							<option value="finesse">Finesse</option>
							<option value="heavy">Heavy</option>
							<option value="pistol">Firearm</option>
							<option value="bow">Bow</option>
							{{/select }}
						</select>
					</div>
					<div class="col row-leader">
						Equipped?
					</div>
					<div class="col-left-align">
						{{#if data.equipped }}
							<button set-equipped class="btn btn-icon btn-success">
								<img src="systems/mage/img/icons/checkmark.png">
							</button>
						{{else}}
							<button set-equipped class="btn btn-icon btn-warn">
								<img src="systems/mage/img/icons/x-mark.png">
							</button>
						{{/if}}
					</div>
				</div>

				<div class="row">
					<div class="col">Carry Weight</div>
					<div class="col-left-align">
						<input type="number" class="input-number" value="{{data.carryWeight}}" name="data.carryWeight">
					</div>
					<div class="col row-leader">Carried?</div>
					<div class="col-left-align">
						{{#if data.carried }}
							<button  set-carried class="btn btn-icon btn-success">
								<img src="systems/mage/img/icons/checkmark.png">
							</button>
						{{else}}
							<button  set-carried class="btn btn-icon btn-warn">
								<img src="systems/mage/img/icons/x-mark.png">
							</button>
						{{/if}}
					</div>

				</div>

				<div class="row">
					<div class="col">AP</div>
					<div class="col-left-align">
						<input type="number" class="input-number" value="{{ data.ap }}" name="data.ap">
					</div>
					<div class="col row-leader">
						{{#if_equal data.hands 1}}
						Dual-Wield?
						{{/if_equal}}
					</div>
					<div class="col-left-align">
						{{#if_equal data.hands 1}}
							{{#if data.duals }}
								<button  set-duals class="btn btn-icon btn-success">
									<img src="systems/mage/img/icons/checkmark.png">
								</button>
							{{else}}
								<button  set-duals class="btn btn-icon btn-warn">
									<img src="systems/mage/img/icons/x-mark.png">
								</button>
							{{/if}}
						{{/if_equal}}
					</div>
				</div>
			</section>
		</div>
	</div>

	<div class="weapon-data">
		<div class="grid-child">

			<section class="table">
				<div class="detail-header">Styles</div>

				<div class="header-row">
					<div class="col">Skill</div>
					<div class="col">Dmg Type</div>
					<div class="col">Dmg Trait</div>
					<div class="col">Hit Trait</div>
					<div class="col">Dmg</div>
					<div class="col">&nbsp;</div>
				</div>

				{{#each data.styles as |style id|}}
				<div class="row">
					<div class="col-center-align">
						<select class="input-text input-medium" name="data.styles.{{id}}.skill">
							{{#select style.skill }}
							<option value=""> -- </option>
							<option value="blunt">Blunt</option>
							<option value="bladed">Bladed</option>
							<option value="piercing">Piercing</option>
							<option value="bows">Bows</option>
							<option value="firearms">Firearms</option>
							<option value="wand">Wand</option>
							{{/select}}
						</select>
					</div>
					<div class="col">
						<select class="input-text input-medium" name="data.styles.{{id}}.dmgType">
							{{#select style.dmgType }}
							<option value="">-- Celestial --</option>
							<option value="solar">Solar</option>
							<option value="banal">Banal</option>
							<option value="lunar">Lunar</option>
							<option value="">-- Elemental --</option>
							<option value="thermal">Thermal</option>
							<option value="electric">Electric</option>
							<option value="toxic">Toxic</option>
							<option value="">-- Celestial --</option>
							<option value="bashing">Bashing</option>
							<option value="piercing">Piercing</option>
							<option value="slashing">Slashing</option>
							{{/select }}
						</select>
					</div>
					<div class="col">
						<select class="input-text input-medium" name="data.styles.{{id}}.dmgTrait">
							{{#select style.dmgTrait }}
							<option value="str">Strength</option>
							<option value="per">Perception</option>
							<option value="dex">Dexerity</option>
							<option value="cor">Courage</option>
							<option value="int">Intelligence</option>
							<option value="cha">Charisma</option>
							{{/select}}
						</select>
					</div>
					<div class="col">
						<select class="input-text input-medium" name="data.styles.{{id}}.hitTrait">
							{{#select style.hitTrait }}
							<option value="str">Strength</option>
							<option value="per">Perception</option>
							<option value="dex">Dexerity</option>
							<option value="cor">Courage</option>
							<option value="int">Intelligence</option>
							<option value="cha">Charisma</option>
							{{/select }}
						</select>
					</div>
					<div class="col">
						{{ style.dmgInterval }}
					</div>
					<div class="col">
						<button delete-style="{{id}}" class="btn btn-icon btn-warn">
							<img src="systems/mage/img/icons/trash.png">
						</button>
					</div>
				</div>
				<!-- Need this extra shit here because it gets run over when data is syncing. Ugly, but it fixes worse bugs ... so.-->
				<input type="hidden" name="data.styles.{{id}}.total" value="{{ style.total }}">
				<input type="hidden" name="data.styles.{{id}}.dmgRoll" value="{{ style.dmgRoll }}">
				<input type="hidden" name="data.styles.{{id}}.dmgInterval" value="{{ style.dmgInterval }}">
				{{/each}}

				<div class="row">
					<div class="col"></div>
					<div class="col"></div>
					<div class="col"></div>
					<div class="col"></div>
					<div class="col"></div>
					<div class="col">
						<button add-style="true" class="btn btn-icon btn-success">
							<img src="systems/mage/img/icons/add-row.png">
						</button>
					</div>
				</div>

			</section>

			<div class="flex">
				<section class="table">
					<div class="detail-header">Extra Rolls</div>

					<div class="header-row">
						<div class="col">Name</div>
						<div class="col">Roll</div>
						<div class="col"></div>
					</div>

					{{#each data.extraRolls as |roll id|}}
					<div class="row">
						<div class="col">
							<input class="input-text input-medium" name="data.extraRolls.{{id}}.rollSource" value="{{roll.rollSource}}">
						</div>
						<div class="col">
							<input class="input-text input-medium" name="data.extraRolls.{{id}}.rollString" value="{{roll.rollString}}">
						</div>
						<div class="col">
							<button delete-roll="{{id}}" class="btn btn-icon btn-warn">
								<img src="systems/mage/img/icons/trash.png">
							</button>
						</div>
					</div>
					{{/each}}

					<div class="row">
						<div class="col"></div>
						<div class="col"></div>
						<div class="col">
							<button add-roll class="btn btn-icon btn-success">
								<img src="systems/mage/img/icons/add-row.png">
							</button>
						</div>
					</div>
					
				</section>

				<section class="table">
					<div class="detail-header">Modifiers</div>

					<div class="header-row">
						<div class="col">Mod</div>
						<div class="col">Source</div>
						<div class="col">Value</div>
						<div class="col">&nbsp;</div>
					</div>

					{{#each data.implicitMods as |mod id| }}
					<div class="row">
						<div class="col">
							<select class="input-text input-medium" name="data.implicitMods.{{id}}.modType">
								{{#select mod.modType}}
								<option value="">-- Implicit Mods --</option>
								<option value="allSaves">All Saves</option>
								<option value="reach">Reach</option>
								<option value="damage">Damage</option>
								<option value="">-- Vitals --</option>
								<option value="hp">Hit Points</option>
								<option value="armor">Armor</option>
								<option value="barrier">Barrier</option>
								<option value="will">Will</option>
								<option value="cunning">Cunning</option>
								<option value="grit">Grit</option>
								<option value="movement">Movement</option>
								<option value="">-- Traits--</option>
								<option value="str">Strength</option>
								<option value="per">Perception</option>
								<option value="dex">Dexerity</option>
								<option value="cor">Courage</option>
								<option value="int">Intelligence</option>
								<option value="cha">Charisma</option>
								<option value="">-- Skills --</option>
								<option value="academics">Academics</option>
								<option value="athletics">Athletics</option>
								<option value="bladed">Bladed</option>
								<option value="blunt">Blunt</option>
								<option value="bows">Bows</option>
								<option value="carry">Carry</option>
								<option value="concentration">Concentration</option>
								<option value="cosmology">Cosmology</option>
								<option value="craft">Craft</option>
								<option value="deception">Deception</option>
								<option value="duel-wielding">Dual-Wield</option>
								<option value="empathy">Empathy</option>
								<option value="endurance">Endurance</option>
								<option value="firearms">Firearms</option>
								<option value="investigation">Investigation</option>
								<option value="larceny">Larceny</option>
								<option value="leadership">Leadership</option>
								<option value="listen">Listen</option>
								<option value="mechanics">Mechanics</option>
								<option value="piercing">Piercing</option>
								<option value="shields">Shields</option>
								<option value="spot">Spot</option>
								<option value="stealth">Stealth</option>
								<option value="survival">Survival</option>
								<option value="throwing">Throwing</option>
								<option value="two-handed">Two-Handed</option>
								<option value="wand">Wand</option>
								<option value="witchsight">Witchsight</option>
								{{/select}}
							</select>
						</div>
						<div class="col">
							<input class="input-text input-medium" name="data.implicitMods.{{id}}.modSource" value="{{mod.modSource}}"> 
						</div>

						<div class="col">
							<input class="input-number" type="number" name="data.implicitMods.{{id}}.modValue" value="{{ mod.modValue }}">
						</div>
						<div class="col">
							<button delete-mod="{{id}}" class="btn btn-icon btn-warn">
								<img src="systems/mage/img/icons/trash.png">
							</button>
						</div>
					</div>
					{{/each}}

					<div class="row">
						<div class="col"></div>
						<div class="col"></div>
						<div class="col"></div>
						<button add-mod class="btn btn-icon btn-success">
							<img src="systems/mage/img/icons/add-row.png">
						</button>
					</div>
				</section>
			</div>
		

			<div class="flex">
				<section class="table">
					<div class="row">
						<div class="detail-header">Description</div>
					</div>
					<div class="row">
						<div class="col">
							<textarea class="textarea-medium" name="data.description">{{ data.description }}</textarea>
						</div>
					</div>
				</section>

				<section class="table">
					<div class="row">
						<div class="detail-header">Roll Notes</div>
					</div>
					<div class="row">
						<div class="col">
							<textarea class="textarea-medium" name="data.rollNotes">{{ data.rollNotes }}</textarea>
						</div>
					</div>
				</section>
			</div>

			
		</div>
	</div>

</div> <!-- End of Weapon Container-->
</form>