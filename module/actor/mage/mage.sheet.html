<form class="mage-form">

<!-- 
<div class="debug">
	Debug : _id = {{ actor._id }} | currentTab = {{ data.currentTab }}
</div>-->

<div	class="flex-row flex-center pad-4">
	<button tab-name="character" 
		{{#if_equal data.currentTab "character"}} selected {{/if_equal}} 
	class="btn btn-large btn-main-tab">Character</button>
	<button tab-name="equipment" 
		{{#if_equal data.currentTab "equipment"}} selected {{/if_equal}} 
		class="btn btn-large btn-main-tab">Equipment</button>
	<button tab-name="spellbook" 
		{{#if_equal data.currentTab "spellbook"}} selected {{/if_equal}} 
		class="btn btn-large btn-main-tab">
		Spellbook</button>
	<button tab-name="development" class="btn btn-large btn-main-tab"
		{{#if_equal data.currentTab "development"}} selected {{/if_equal}}>
		Development
	</button>
</div>

<hr class="flaired-divider">

{{#if_equal data.currentTab "character" }}
<div id="character" class="tab character-container character-tab">
	<div class="header grid-child">
		<div class="flex-row">

			<div class="flex-1">
				<img class="character-icon" data-edit="img" src="{{ actor.img }}">
			</div>

			<div class="flex-3">
				<section class="table">
					<div class="row">
						<div class="col">Character</div>
						<div class="col-left-align">
							<input name="name" value="{{ actor.name }}" class="input-text input-wide">
						</div>
					</div>

					<div class="row">
						<div class="col">Tradition</div>
						<div class="col-left-align">
							<select name="data.tradition" class="input-text input-wide">
								{{#select data.tradition }}
								<option value=""></option>
								<option value="">-- Artifice</option>
								<option value="SOCEITY">Soceity of Ether</option>
								<option value="BELARUS">Belarus Clan</option>
								<option value="SOLIFICATI">Solificati</option>
								<option value="VOID">Void Engineers</option>
								<option value="">-- Theurgy</option>
								<option value="ORDER">Order of Hermes</option>
								<option value="STIGMATA">Stigmata Cabal</option>
								<option value="TAFTANI">Taftani</option>
								<option value="VAULDERMEN">Vauldermen</option>
								<option value="">-- Conviction</option>
								<option value="CULT">Cult of Grammaticus</option>
								<option value="ONIBABA">Onibaba</option>
								<option value="CELESTIAL">Celestial Chorus</option>
								<option value="EUTHANATOS">Euthanatos</option>
								<option value="BROTHERHOOD">Brotherhood of the Rule</option>
								{{/select }}
							</select>
						</div>
					</div>

					<div class="row">
						<div class="col">Mystic Physical</div>
						<div class="col-left-align">
							<select name="data.mystictraits.physical"  class="input-text input-wide">
								{{#select data.mystictraits.physical }}
								<option value=""> -- </option>
								<option value="str">Strength</option>
								<option value="dex">Dexerity</option>
								<option value="cha">Charisma</option>
								{{/select}}
							</select>
						</div>
					</div>

					<div class="row">
						<div class="col">Mystic Mental</div>
						<div class="col-left-align">
							<select name="data.mystictraits.mental" class="input-text input-wide">
								{{#select data.mystictraits.mental }}
								<option value=""> -- </option>
								<option value="int">Intelligence</option>
								<option value="cor">Courage</option>
								<option value="per">Perception</option>
								{{/select }}
							</select>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						</div>
					</div>
				</section>
			</div>

			<div class="flex-2">
				<img class="mage-icon" src="systems/Mage/img/sheets/MageLogo.png">
			</div>
		</div>
	</div> <!-- End pf Header-->

	<div class="traits">

	<div class="gen-header">
		<div class="traits-header">Traits</div>
	</div>

	<div class="grid-child">
	<div class="flex-row">

		<div class="trait-box flex-row" trait-drag="str">
			<div class="flex-col">

				<div class="trait-header-margin"><h4 class="sub-header">Strength</h4></div>
				<div class="big-trait-container">
					<input disabled class="input-trait-subscript" value="{{ data.traitParts.str.base }}">
					<button trait-name="str" class="btn btn-medium btn-traits">
					<span class="inline-icon">&#127922;</span>
					{{ data.traits.str.value }}
					</button>
				</div>

				<div class="small-header flex-row">
					<div>&nbsp;Temp</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.str.temp" 
						value="{{ data.traitParts.str.temp }}"></div>
				</div>

				<div class="small-header flex-row striped">
					<div>&nbsp;Sustain</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.str.sustained" 
						value="{{ data.traitParts.str.sustained }}"></div>
				</div>

				<div class="small-header flex-row">
					<div>&nbsp;Perm</div>
					<div><input type="number" value="{{ data.traitParts.str.perm }}" class="input-number" type="number"></div>
				</div>
				
			</div>
		</div>

		<div class="trait-box flex-row" trait-drag="dex">
			<div class="flex-col">

				<div><h4 class="sub-header">Dexerity</h4></div>
				<div class="big-trait-container">
					<input name="data.traitParts.dex.base" value="{{ data.traitParts.dex.base }}" disabled class="input-trait-subscript">
					<button trait-name="dex" class="btn btn-medium btn-traits">
					<span class="inline-icon">&#127922;</span>
					{{ data.traits.dex.value }}
					</button>
				</div>

				<div class="small-header flex-row">
					<div>&nbsp;Temp</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.dex.temp"
						value="{{ data.traitParts.dex.temp }}" >
						</div>
				</div>

				<div class="small-header flex-row striped">
					<div>&nbsp;Sustain</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.dex.sustained"
						value="{{ data.traitParts.dex.sustained }}"></div>
				</div>

				<div class="small-header flex-row">
					<div>&nbsp;Perm</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.dex.perm"
						value="{{ data.traitParts.dex.perm }}"></div>
				</div>
				
			</div>
		</div>

		<div class="trait-box flex-row" trait-drag="per">
			<div class="flex-col">

				<div><h4 class="sub-header">Perception</h4></div>
				<div class="big-trait-container">
					<input name="data.traitParts.per.base" value="{{ data.traitParts.per.base }}" disabled class="input-trait-subscript">
					<button trait-name="per" class="btn btn-medium btn-traits">
					<span class="inline-icon">&#127922;</span>
					{{ data.traits.per.value }}
					</button>
				</div>

				<div class="small-header flex-row">
					<div>&nbsp;Temp</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.per.temp"
						value="{{ data.traitParts.per.temp }}"></div>
				</div>

				<div class="small-header flex-row striped">
					<div>&nbsp;Sustain</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.per.sustained"
						value="{{ data.traitParts.per.sustained }}"></div>
				</div>

				<div class="small-header flex-row">
					<div>&nbsp;Perm</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.per.perm"
						value="{{ data.traitParts.per.perm }}"></div>
				</div>
				
			</div>
		</div>
		
		<div class="trait-box flex-row" trait-drag="int">
			<div class="flex-col">

				<div><h4 class="sub-header">Intelligence</h4></div>
				<div class="big-trait-container">
					<input 
						name="data.traitParts.int.base" 
						value="{{ data.traitParts.int.base }}" disabled class="input-trait-subscript">
					<button trait-name="int" class="btn btn-medium btn-traits">
					<span class="inline-icon">&#127922;</span>
					{{ data.traits.int.value }}</button>
				</div>

				<div class="small-header flex-row">
					<div>&nbsp;Temp</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.int.temp"
						value="{{ data.traitParts.int.temp }}"></div>
				</div>

				<div class="small-header flex-row striped">
					<div>&nbsp;Sustain</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.int.sustained"
						value="{{ data.traitParts.int.sustained }}"></div>
				</div>

				<div class="small-header flex-row">
					<div>&nbsp;Perm</div>
					<div><input class="input-number" type="number" 
						name="data.traitParts.int.perm"
						value="{{ data.traitParts.int.perm }}"></div>
				</div>
					
			</div>
		</div>
		
		<div class="trait-box flex-row" trait-drag="cha">
		<div class="flex-col">

			<div><h4 class="sub-header">Charisma</h4></div>
			<div class="big-trait-container">
				<input disabled class="input-trait-subscript"
					name="data.traitParts.cha.base"
					value="{{ data.traitParts.cha.base }}">
				<button trait-name="cha" class="btn btn-medium btn-traits">
					<span class="inline-icon">&#127922;</span>
					{{ data.traits.cha.value }}
				</button>
			</div>

			<div class="small-header flex-row">
				<div>&nbsp;Temp</div>
				<div><input class="input-number" type="number"
					name="data.traitParts.cha.temp"
					value="{{ data.traitParts.cha.temp }}"></div>
			</div>

			<div class="small-header flex-row striped">
				<div>&nbsp;Sustain</div>
				<div><input class="input-number" type="number" 
					name="data.traitParts.cha.sustained"
					value="{{ data.traitParts.cha.sustained }}"></div>
			</div>

			<div class="small-header flex-row">
				<div>&nbsp;Perm</div>
				<div><input class="input-number" type="number" 
					name="data.traitParts.cha.perm"
					value="{{ data.traitParts.cha.perm }}"></div>
			</div>
				
		</div>
		</div>

		<div class="trait-box flex-row" trait-drag="cor">
			<div class="flex-col">

				<div><h4 class="sub-header">Courage</h4></div>
				<div class="big-trait-container">
					<input name="data.traitParts.cor.base" value="{{ data.traitParts.cor.base }}" disabled class="input-trait-subscript">
					<button trait-name="cor" class="btn btn-medium btn-traits">
						<span class="inline-icon">&#127922;</span>
						{{ data.traits.cor.value }}
					</button>
				</div>

				<div class="small-header flex-row">
					<div>&nbsp;Temp</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.cor.temp" 
						value="{{ data.traitParts.cor.temp }}"></div>
				</div>

				<div class="small-header flex-row striped">
					<div>&nbsp;Sustain</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.cor.sustained" 
						value="{{ data.traitParts.cor.sustained }}"></div>
				</div>

				<div class="small-header flex-row">
					<div>&nbsp;Perm</div>
					<div><input class="input-number" type="number"
						name="data.traitParts.cor.perm"
						value="{{ data.traitParts.cor.perm }}"></div>
				</div>
					
			</div>
		</div>

	
	
	</div>
	</div> <!-- End of grid child -->
	</div> <!-- End of traits -->

	<div class="vitals">
	<div class="gen-header">
		<div class="vitals-header">Vitals</div>
	</div>

	<div class="grid-child">
		<section class="table">
			<div class="header-row vitals-header">
				<div class="col-lead-short"></div>
				<div class="col">Bonus</div>
				<div class="col">Current / Max</div>
			</div>

			<div class="row">
				<div class="col-lead-short">Health</div>
				<div class="col">
					<input name="data.hp.bonus" value="{{ data.hp.bonus }}" class="input-number" type="number">
				</div>
				<div class="col">
					<input name="data.hp.current" value="{{ data.hp.current }}" class="input-number" type="number">
					/ <span>{{ data.hp.max }}</span> 
				</div>
			</div>

			<div class="row">
				<div class="col-lead-short">Armor</div>
				<div class="col">
					<input name="data.armor.bonus" value="{{ data.armor.bonus }}" class="input-number" type="number">
				</div>
				<div class="col">
					<input name="data.armor.current" value="{{ data.armor.current }}" class="input-number" type="number"> 
					<span> / {{ data.armor.max }}</span>
				</div>
			</div>

			<div class="row">
				<div class="col-lead-short">Paradox</div>
				<div class="col"><input name="data.paradox.bonus" value="{{data.paradox.bonus}}" class="input-number" type="number"></div>
				<div class="col">
					<input name="data.paradox.current" value="{{ data.paradox.current }}" class="input-number" type="number">
					<span> / {{ data.paradox.max }}</span> 
					</div>
			</div>

		</section>

		<section class="table">
			<div class="header-row vitals-header">
				<div class="col-center-align">Wound Roll</div>
				<div class="col">Paradox Roll</div>
			</div>

			<div class="row" utility-drag>
				<div class="col-center-align">
					<button wound-button class="btn btn-vitals">
						<span class="inline-icon">&#127922;</span>
					</button>
				</div>

				<div class="col" utility-drag>
					<button paradox-button class="btn btn-vitals">
						<span class="inline-icon">&#127922;</span>
					{{ data.paradox.current }}</button>
				</div>
			</div>
		</section>

		<section class="table">
			<div class="header-row vitals-header">
				<div class="col-lead-short"></div>
				<div class="col">Equip</div>
				<div class="col">Enchant</div>
				<div class="col">
					Roll
				</div>
			</div>

			{{#each data.defenses as |defense id|}}
			<div class="row" save-drag="{{id}}">
				<div class="col-lead-short">{{ defense.name }}</div>
				<div class="col"><input class="input-number" type="number" name="data.defenses.{{id}}.equip" value="{{ defense.equip }}"></div>
				<div class="col"><input class="input-number" type="number" name="data.defenses.{{id}}.enchant" value="{{ defense.enchant }}"></div>
				<div class="col">
					<button save-name={{id}} class="btn btn-vitals">
						<span class="inline-icon">&#127922;</span>
						{{ defense.value }}
					</button>
				</div>
			</div>
			{{/each}}
			
		</section>
	</div> <!-- End of Grid child -->
	</div> <!-- end of Vitals -->

	<div class="skill">
		
		<div class="gen-header">
			<div class="skills-header">Skills</div>
		</div>

	<div class="grid-child">
		<div class="flex-row">
			<button tab-name="grit" 
				{{#if_equal data.currentSkillTab "grit"}} selected {{/if_equal}} 
				class="btn btn-hi-medium btn-skills-tab">Grit</button>
			<button tab-name="cunning" 
				{{#if_equal data.currentSkillTab "cunning"}} selected {{/if_equal}} 
				class="btn btn-hi-medium btn-skills-tab">Cunning</button>
			<button tab-name="will" 
				{{#if_equal data.currentSkillTab "will"}} selected {{/if_equal}} 
				class="btn btn-hi-medium btn-skills-tab">Will</button>
		</div>

		<section class="table">
		<div class="header-row skills-header">
			<div class="col">&nbsp;</div>
			<div class="col">Trait</div>
			<div class="col">Equip</div>
			<div class="col">Enchant</div>
			<div class="col">Roll</div>
		</div>

		{{#if_equal data.currentSkillTab "grit" }}
			{{#each data.skills.grit as |skill id|}}
			<div class="row" skill-drag="{{id}}" skill-drag-type="grit">
				<div class="col">{{ name }}</div>
				<div class="col small-text">
					{{ capitalize skill.trait }}
				</div>
				<div class="col">
					<input type="number" name="data.skills.grit.{{id}}.equip" value="{{ skill.equip }}" class="input-number">
				</div>
				<div class="col">
					<input type="number" name="data.skills.grit.{{id}}.enchant" value="{{ skill.enchant }}" class="input-number">
				</div>
				<div class="col">
					<button grit-skill-name="{{ id }}" class="btn btn-skills">
						<span class="inline-icon">&#127922;</span>
						{{ skill.value }}
					</button>
				</div>
			</div>
			{{/each}}
		{{/if_equal}}

		{{#if_equal data.currentSkillTab "cunning" }}
			{{#each data.skills.cunning as |skill id|}}
			<div class="row" skill-drag="{{id}}" skill-drag-type="cunning">
				<div class="col">{{ skill.name }}</div>
				<div class="col small-text">
					{{ capitalize skill.trait }}
				</div>
				<div class="col">
					<input type="number" name="data.skills.cunning.{{id}}.equip" value="{{ skill.equip }}" class="input-number">
				</div>
				<div class="col">
					<input type="number" name="data.skills.cunning.{{id}}.enchant" value="{{ skill.enchant }}" class="input-number">
				</div>
				<div class="col">
					<button cunning-skill-name="{{ id }}" class="btn btn-skills">
						<span class="inline-icon">&#127922;</span>
						{{ skill.value }}
					</button>
				</div>
			</div>
			{{/each}}
		{{/if_equal}}

		{{#if_equal data.currentSkillTab "will" }}
			{{#each data.skills.will as |skill id|}}
			<div class="row" skill-drag="{{id}}" skill-drag-type="will">
				<div class="col">{{ skill.name }}</div>
				<div class="col small-text">
					{{ capitalize skill.trait }}
				</div>
				<div class="col">
					<input type="number" name="data.skills.will.{{id}}.equip" value="{{ skill.equip }}" class="input-number">
				</div>
				<div class="col">
					<input type="number" name="data.skills.will.{{id}}.enchant" value="{{ skill.enchant }}" class="input-number">
				</div>
				<div class="col">
					<button will-skill-name="{{ id }}" class="btn btn-skills">
						<span class="inline-icon">&#127922;</span>
						{{ skill.value }}
					</button>
				</div>
			</div>
			{{/each}}
		{{/if_equal}}
		</section>

		
	</div> <!-- End of Grid Child -->
	</div> <!-- End of Skills -->

	<div class="arcana">
		<div class="gen-header">
			<div class="arcana-header">Arcana</div>
		</div>

	<div class="grid-child">

		<section class="table">
			<div class="header-row arcana-header">
				<div class="col">&nbsp;</div>
				<div class="col">Weaver</div>
				<div class="col">Wyld</div>
				<div class="col">Wyrm</div>
			</div>

			<div class="row">
				<div class="col">Goverance</div>
				<div class="col" arcana-drag="time">
					<div class="small-sub-header">Time</div>
					<button arcana-name="time" class="btn btn-arcana">
						<span class="inline-icon">&#127922;</span>
						{{ data.arcana.time.value }}
					</button>
				</div>
				<div class="col" arcana-drag="space">
					<div class="small-sub-header">Space</div>
					<button arcana-name="space" class="btn btn-arcana">
						<span class="inline-icon">&#127922;</span>
						{{ data.arcana.space.value }}
					</button>
				</div>
				<div class="col" arcana-drag="entropy">
					<div class="small-sub-header">Entropy</div>
					<button arcana-name="entropy" class="btn btn-arcana">
						<span class="inline-icon">&#127922;</span>
						{{ data.arcana.entropy.value }}
					</button>
				</div>
			</div>

			<div class="row">
				<div class="col">Patterns</div>
				<div class="col" arcana-drag="matter">
					<div class="small-sub-header">Matter</div>
					<button arcana-name="matter" class="btn btn-arcana">
						<span class="inline-icon">&#127922;</span>
						{{ data.arcana.matter.value }}
					</button>
				</div>
				<div class="col" arcana-drag="life">
					<div class="small-sub-header">Life</div>
					<button arcana-name="life" class="btn btn-arcana">
						<span class="inline-icon">&#127922;</span>
						{{ data.arcana.life.value }}
					</button>
				</div>
				<div class="col" arcana-drag="">
					<div class="small-sub-header">Spirit</div>
					<button arcana-name="spirit" class="btn btn-arcana">
						<span class="inline-icon">&#127922;</span>
						{{ data.arcana.spirit.value }}
					</button>
				</div>
			</div>

			<div class="row">
				<div class="col">Essence</div>
				<div class="col" arcana-drag="mind">
					<div class="small-sub-header">Mind</div>
					<button arcana-name="mind" class="btn btn-arcana">
						<span class="inline-icon">&#127922;</span>
						{{ data.arcana.mind.value }}
					</button>
				</div>
				<div class="col" arcana-drag="prime">
					<div class="small-sub-header">Prime</div>
					<button arcana-name="prime" class="btn btn-arcana">
						<span class="inline-icon">&#127922;</span>
						{{ data.arcana.prime.value }}
					</button>
				</div>
				<div class="col" arcana-drag="force">
					<div class="small-sub-header">Forces</div>
					<button arcana-name="force" class="btn btn-arcana">
						<span class="inline-icon">&#127922;</span>
						{{ data.arcana.force.value }}
					</button>
				</div>
			</div>
		</section>

	</div> <!-- end of Gen Header-->
	</div> <!-- End of Arcana -->

	<div class="resistance">
	<div class="gen-header">
		<div class="resistance-header">Resistance</div>
	</div>

	<div class="grid-child">
		<section class="table">

			<div class="header-row resistance-header">
				<div class="col">Material</div>
				<div class="col">Elemental</div>
				<div class="col">Celestial</div>
			</div>

			<div class="resist-row">
				<div class="col">
					<div class="small-sub-header">Blunt</div>
					<select class="input-text input-medium" name="data.resist.blunt">
						{{#select data.resist.blunt}}
						<option value="0">Immune</option>
						<option value=".5">Resist</option>
						<option value="1">Normal</option>
						<option value="2">Weak</option>
						{{/select}}
					</select>
				</div>
				<div class="col">
					<div class="small-sub-header">Thermal</div>
					<select class="input-text input-medium" name="data.resist.thermal">
						{{#select data.resist.thermal}}
						<option value="0">Immune</option>
						<option value=".5">Resist</option>
						<option value="1">Normal</option>
						<option value="2">Weak</option>
						{{/select}}
					</select>
				</div>
				<div class="col">
					<div class="small-sub-header">Solar</div>
					<select class="input-text input-medium" name="data.resist.solar">
						{{#select data.resist.solar}}
						<option value="0">Immune</option>
						<option value=".5">Resist</option>
						<option value="1">Normal</option>
						<option value="2">Weak</option>
						{{/select}}
					</select>
				</div>
			</div>

			<div class="resist-row">
				<div class="col">
					<div class="small-sub-header">Peircing</div>
					<select class="input-text input-medium" name="data.resist.piercing">
						{{#select data.resist.piercing}}
						<option value="0">Immune</option>
						<option value=".5">Resist</option>
						<option value="1">Normal</option>
						<option value="2">Weak</option>
						{{/select}}
					</select>
				</div>
			
				<div class="col">
					<div class="small-sub-header">Electric</div>
					<select class="input-text input-medium" name="data.resist.electric">
						{{#select data.resist.electric}}
						<option value="0">Immune</option>
						<option value=".5">Resist</option>
						<option value="1">Normal</option>
						<option value="2">Weak</option>
						{{/select}}
					</select>
				</div>
				<div class="col">
					<div class="small-sub-header">Lunar</div>
					<select class="input-text input-medium" name="data.resist.lunar">
						{{#select data.resist.lunar}}
						<option value="0">Immune</option>
						<option value=".5">Resist</option>
						<option value="1">Normal</option>
						<option value="2">Weak</option>
						{{/select}}
					</select>
				</div>
			</div>

			<div class="resist-row">
				<div class="col">
					<div class="small-sub-header">Slashing</div>
					<select class="input-text input-medium" name="data.resist.slashing">
						{{#select data.resist.slashing}}
						<option value="0">Immune</option>
						<option value=".5">Resist</option>
						<option value="1">Normal</option>
						<option value="2">Weak</option>
						{{/select}}
					</select>
				</div>
			
				<div class="col">
					<div class="small-sub-header">Toxic</div>
					<select class="input-text input-medium" name="data.resist.toxic">
						{{#select data.resist.toxic}}
						<option value="0">Immune</option>
						<option value=".5">Resist</option>
						<option value="1">Normal</option>
						<option value="2">Weak</option>
						{{/select}}
					</select>
				</div>
				<div class="col">
					<div class="small-sub-header">Banal</div>
					<select class="input-text input-medium" name="data.resist.banal">
						{{#select data.resist.banal}}
						<option value="0">Immune</option>
						<option value=".5">Resist</option>
						<option value="1">Normal</option>
						<option value="2">Weak</option>
						{{/select}}
					</select>
				</div>
			</div>

		</section>
	</div><!-- End of Grid-Child-->
	
	</div><!-- End of Resistance Header -->

	<div class="mods">
		<div class="gen-header">
			<div class="mod-header">Effects</div>
		</div>

		
	<div class="grid-child">
		<section class="table">
			<div class="row">
				<div class="col">
					Haste
				</div>
				<div class="col">
					<input class="input-number" name="data.contestedStatusEffects.haste" value="{{data.contestedStatusEffects.haste}}">
				</div>
				<div class="col">
					Slow
				</div>
			</div>

			<div class="row">
				<div class="col">
					Regen
				</div>
				<div class="col">
					<input class="input-number" name="data.contestedStatusEffects.regen" value="{{data.contestedStatusEffects.regen}}">
				</div>
				<div class="col">
					Rot / Burn
				</div>
			</div>

			<div class="row">
				<div class="col">
					Inspire
				</div>
				<div class="col">
					<input class="input-number" name="data.contestedStatusEffects.inspire" value="{{data.contestedStatusEffects.inspire}}">
				</div>
				<div class="col">
					Oppress
				</div>
			</div>

			<div class="row">
				<div class="col">
					Enlighten
				</div>
				<div class="col">
					<input class="input-number" name="data.contestedStatusEffects.enlighten" value="{{data.contestedStatusEffects.enlighten}}">
				</div>
				<div class="col">
					Confuse
				</div>
			</div>

			<div class="row">
				<div class="col">
					Vigor
				</div>
				<div class="col">
					<input class="input-number" name="data.contestedStatusEffects.vigor" value="{{data.contestedStatusEffects.vigor}}">
				</div>
				<div class="col">
					Weak
				</div>
			</div>
		</section>

		<section class="table">	
			<select value="currentRollMode">
				{{#select currentRollMode}}
				<option value="public">Public</option>
				<option value="gm">Narrator</option>
				<option value="self">Self</option>
				{{/select}}
			</select>
		</section>
	</div><!-- End of Grid Child-->
	</div><!-- End of Mods-->
</div>
{{/if_equal}}

{{#if_equal data.currentTab "equipment" }}
<div id="equipment" class="tab equipment-container equipment-tab">
	<div class="equip-list-grid">
		<div class="gen-header">
			<div class="equip-list-header">Inventory</div>
		</div>

		<div class="grid-child">
			<div class="expandable">
				<div button-expandable="weapons" class="flex-row expandable-header {{#if_equal data.inventoryExpanded.weapons true}}open{{/if_equal}}">
					<div class="flex-1">Weapons</div>
					<div class="flex-half flex-justify-self-right"></div>
				</div>

				<div expandable-data="weapons" class="weapons-list expanded {{#if_equal data.inventoryExpanded.weapons true}}open{{/if_equal}}">
					<section class="table">
						<div class="header-row skills-header">
							<div class="col">Weapon</div>
							<div class="col">Properties</div>
							<div class="col">Styles</div>
							<div class="col">&nbsp;</div>
						</div>
						{{#each data.weapons as |weapon id| }}
						<div weapon-drag data-item-id="{{weapon._id}}" class="row">
							
							<div class="col-left-align">
								<div class="flex">
									<img class="inventory-item" src="{{weapon.img}}">
									<div>
										<div>{{weapon.name}}</div>
										<div class="small-text">{{ weapon.data.hands }} Handed {{ capitalize weapon.data.weaponType }}</div>
										<div class="small-text">{{ weapon.data.dmg }} - ( 2 AP )</div>
									</div>
								</div>
								
							</div>

							<div class="col pad-4">
								{{#each weapon.data.implicitMods as |mod id|}}
								<div class="justify-content-between">
									<span class="small-text">{{ capitalize mod.modType }}</span>
									<span class="small-text">{{ mod.modValue }}</span>
								</div>
								{{/each}}
							</div>

							<div class="col pad-4">
								{{#each weapon.data.styles as |style id|}}
								<div class="justify-content-between">
									<span class="small-text">{{ capitalize style.skill }} ( {{ style.total }} )</span>
									<span class="small-text">{{ style.dmgInterval }} {{ capitalize style.dmgType }} Dmg</span>
								</div>
								{{/each}}
							</div>

							<div class="col">
								<div class="justify-content-between">
									<div></div>
									
									<div>
										<button edit-weapon="{{weapon._id}}" class="btn btn-icon btn-neutral">
											<img src="systems/mage/img/icons/gear.png">
										</button>
										<button delete-weapon="{{weapon._id}}" class="btn btn-icon btn-warn">
											<img src="systems/mage/img/icons/trash.png">
										</button>
									</div>
								</div>
								<button roll-weapon="{{weapon._id}}" class="btn btn-vitals btn">
									<span class="inline-icon">ðŸŽ²</span> {{ weapon.total }}
								</button>
							</div>
						</div>
						{{/each}}
					</section>

					<div class="flex-justify-self-right">
						<button add-weapon class="btn btn-large btn-success">
							<span>Add Weapon</span>
						</button>
					</div>
				</div>
	
			</div><!-- End of expandable weapons-->

			<div class="expandable">
				<div button-expandable="armor" class="flex-row expandable-header
					{{#if_equal data.inventoryExpanded.armor true}}open{{/if_equal}}">
					<div class="flex-1">Armor</div>
					<div class="flex-half flex-justify-self-right">

					</div>
				</div>

				<div expandable-data="armor" class="expanded
					{{#if_equal data.inventoryExpanded.armor true}}open{{/if_equal}}
					">
					<section>
						Armor
					</section>
				</div>
			</div>

			<div class="expandable">
				<div button-expandable="other" class="flex-row expandable-header
					{{#if_equal data.inventoryExpanded.other true}}open{{/if_equal}}
					">
					<div class="flex-1">Other Equipment</div>
					<div class="flex-half flex-justify-self-right">

					</div>
				</div>

				<div expandable-data="other" class="expanded
					{{#if_equal data.inventoryExpanded.other true}}open{{/if_equal}}
					">
					<section>
						Other Equipment & Consumables
					</section>
				</div>
			</div>

			<div class="expandable">
				<div button-expandable="assets" class="flex-row expandable-header
					{{#if_equal data.inventoryExpanded.assets true}}open{{/if_equal}}
					">
					<div class="flex-1">Assets & Income</div>
					<div class="flex-half flex-justify-self-right">

					</div>
				</div>

				<div expandable-data="assets" class="expanded
					{{#if_equal data.inventoryExpanded.assets true}}open{{/if_equal}} ">
					<section>
						Assets
					</section>
				</div>
			</div>

		</div>
	</div>

	<div class="doll-grid">
		<div class="gen-header">
			<div class="doll-header">Armor</div>
		</div>
		
		<div class="grid-child">
			<div class="paper-doll">
				<img src="systems/mage/img/sheets/paper-doll.png">

				<div class="armor-set-container">
					<div class="flex-row">
						<div class="flex-1"></div>
						<div class="flex-1">
							<img class="armor-equipment" src="systems/mage/icons/items/equipment/cloak-fur.jpg"><br>
							<span class="small-text">Helmet</span>
						</div>
						<div class="flex-1">
							<img class="armor-equipment" src="systems/mage/icons/items/equipment/cowl.jpg"><br>
							<span class="small-text">Neck</span>
						</div>
					</div>

					<div class="flex-row">
						<div class="flex-1"></div>
						<div class="flex-1">
							<img class="armor-equipment" src="systems/mage/icons/items/armor/halfplate.png"><br>
							<span class="small-text">Armor</span>
						</div>
						<div class="flex-1">
							<img class="armor-equipment" src="systems/mage/icons/items/jewelry/ring-eye.jpg"><br>
							<span class="small-text">Right Ring</span>
						</div>
					</div>

					<div class="flex-row">
						<div class="flex-1">
							<img class="armor-equipment" src="systems/mage/icons/items/jewelry/ring-gold.jpg"><br>
							<span class="small-text">Left Ring</span>
						</div>
						<div class="flex-1">
							<img class="armor-equipment" src="systems/mage/icons/items/jewelry/ring-gold.jpg"><br>
							<span class="small-text">Belt</span>
						</div>
						<div class="flex-1">
							
						</div>
					</div>
					
					<div class="flex-row">
						<div class="flex-1"></div>
						<div class="flex-1">
							<img class="armor-equipment" src="systems/mage/icons/items/equipment/boots.png"><br>
							<span class="small-text">Boots</span>
						</div>
						<div class="flex-1"></div>
					</div>

				</div>
			</div>
		</div>
	</div>

	<div class="weapon-set-grid">
		<div class="gen-header">
			<div class="weapon-set-header">Weapons</div>
		</div>

		<div class="grid-child">
			<section class="table">
				<div class="row weapon-set-container">
					<div class="col-lead-short">
						<button class="btn btn-neutral">Equip<br>Set 1</button>
					</div>
					<div class="col">
						<img src="systems/mage/icons/items/weapons/battleaxe.png"><br>
						<span class="small-text">Battleaxe of Justice</span>
					</div>
					<div class="col">
						<img src="systems/mage/icons/items/armor/shield.png"><br>
						<span class="small-text">Mirror Shield</span>
					</div>
				</div>

				<div class="row weapon-set-container">
					<div class="col-lead-short">
						<button class="btn btn-neutral">Equip<br>Set 2</button>
					</div>
					<div class="col">
						<img src="systems/mage/icons/items/weapons/battleaxe.png"><br>
						<span class="small-text">Battleaxe of Justice</span>
					</div>
					<div class="col">
						<img src="systems/mage/icons/items/armor/shield.png"><br>
						<span class="small-text">Mirror Shield</span>
					</div>
				</div>

				<div class="row weapon-set-container">
					<div class="col-lead-short">
						<button class="btn btn-neutral">Equip<br>Set 3</button>
					</div>
					<div class="col">
						<img src="systems/mage/icons/items/weapons/battleaxe.png"><br>
						<span class="small-text">Battleaxe of Justice</span>
					</div>
					<div class="col">
						<img src="systems/mage/icons/items/armor/shield.png"><br>
						<span class="small-text">Mirror Shield</span>
					</div>
				</div>

				<div class="row weapon-set-container">
					<div class="col-lead-short">
						<button class="btn btn-neutral">Equip<br>Set 3</button>
					</div>
					<div class="col">
						<img src="systems/mage/icons/items/weapons/battleaxe.png"><br>
						<span class="small-text">Battleaxe of Justice</span>
					</div>
					<div class="col">
						<img src="systems/mage/icons/items/armor/shield.png"><br>
						<span class="small-text">Mirror Shield</span>
					</div>
				</div>
			</section>
		</div>
	</div>
</div> <!-- End of Equipment Tab -->
{{/if_equal}}

{{#if_equal data.currentTab "spellbook"}}
<div id="spellbook" class="tab spell-book-container spellbook-tab">
	<div class="spellbook-filter-grid">
		<div class="gen-header">
			<div class="spellbook-filter-header">Filters</div>
		</div>
	
		<div class="grid-child">

		</div>
	</div>

	<div class="spellbook-sort-grid">
		<div class="gen-header">
			<div class="spellbook-sort-header">Sort</div>
		</div>

		<div class="grid-child">
		
		</div>
	</div>

	<div class="spellbook-rote-grid">
		<div class="gen-header">
			<div class="spellbook-rote-header">Rotes</div>
		</div>

		<div class="grid-child">
			<div class="justify-content-between">
				<span>Memorized</span>
				<span class="non-input-number">0</span>
			</div>
			<div class="justify-content-between">
				<span>Remaining</span>
				<span class="non-input-number">0</span>
			</div>
		</div>
	</div>

	<div class="spellbook-list-grid">
		<div class="gen-header">
			<div class="spellbook-list-header">Spellbook</div>
		</div>

		<div class="grid-child">
			{{#each data.spells as |spell id|}}
			<div class="one-third-element">
				<div class="flex-row mini-card-top" spell-drag>
					<div>
						<button roll-spell="{{spell._id}}" class="btn btn-spellroll">
							<img src="{{spell.img}}">
						</button>
					</div>
					<div class="flex-3">
						{{ spell.name }}</span><br>
						<span class="row-subtitle">{{ spell.data.spellType }}</span><br>
						<span class="row-subtitle">
						{{#each spell.data.spheres as |sphere id|}}
							<span class="tag">{{ sphere.type }} {{ sphere.num }}</span>
						{{/each}}
						</span>
					</div>
					<div class="flex-2">
						<div class="justify-content-between">
							<span>
								<button edit-spell="{{spell._id}}" class="btn btn-icon btn-neutral">
									<img src="systems/mage/img/icons/gear.png">
								</button>
							</span>

							<span>
								<button delete-spell="{{spell._id}}" class="btn btn-icon btn-warn">
								<img src="systems/mage/img/icons/trash.png">
								</button>
							</span>
						</div>

						<div class="justify-content-between">
							<div>
								{{#if spell.data.memorized.value }}
									Count:
									<input class="input-number" name="data.spells.{{id}}.memorized.num" value="{{spell.memorized.num}}">
								{{/if}}
							</div>
							<span class="row-title">
								{{#if spell.data.memorized.value }}
									<button memorize-spell="{{spell._id}}" class="btn btn-icon btn-neutral">
										<img src="systems/mage/img/icons/memorize.png">
									</button>
								{{else}}
									<button memorize-spell="{{spell._id}}" class="btn btn-icon btn-warn">
										<img src="systems/mage/img/icons/memorize.png">
									</button>
								{{/if}}
							</span>
						</div>
					</div>
				</div>

				<div class="flex-row mini-card-bottom">
					<div class="flex-1">
						<div class="justify-content-between">
							<span class="row-subtitle">&nbsp;Vulgarity</span>
							<span class="span-non-input-number">{{ spell.data.vulgarity }}</span>
						</div>

						<div class="justify-content-between">
							<span class="row-subtitle">&nbsp;Paradox</span>
							<span class="span-non-input-number">{{ spell.data.paradox }}</span>
						</div>

						<div class="justify-content-between">
							<span class="row-subtitle">&nbsp;&nbsp;&nbsp;Arcana</span>
							<span class="span-non-input-number">{{ spell.data.arcana }}</span>
						</div>
					</div>

					<div class="flex-2 align-right">
						{{#each spell.data.effects as |effect id|}}
							

							{{#if_equal effect.type "damage" }}
								<span class="damage-display">Deals {{ effect.num }} {{ effect.subtype }} Dmg</span>
							{{/if_equal}}

							{{#if_equal effect.type "status" }}
								<span></span>
							{{/if_equal}}

							
						{{/each}}
						</table>
					</div>
				</div>
			</div>
			{{/each}}

			<div class="one-third-element">
				<button add-spell class="btn btn-large btn-success">
					<span>Add New Spell</span>
				</button>
			</div>
		</div>
	</div>

	
</div><!-- End of Spellbook Tab -->
{{/if_equal}}

{{#if_equal data.currentTab "development" }}
<div id="development" class="tab development-container development-tab">
	<div class="char-points">
		<div class="gen-header">
			<div class="character-points-header">Character Points</div>
		</div>
	
	<div class="grid-child">
		<div>
		<section class="table">
			<div class="header-row">
				<div class="col">Reamining</div>
				<div class="col">Spent</div>
				<div class="col">Total</div>
				<div class="col">Earned</div>
				<div class="col">Trained</div>
			</div>

			<div class="clean-row">
				<div class="col"><div class="cp-calculated-display">{{ data.cp.remaining }}</div></div>
				<div class="col"><div class="cp-calculated-display">{{ data.cp.spent }}</div></div>
				<div class="col"><div class="cp-calculated-display">{{ data.cp.trained }}</div></div>
				<div class="col"><div class="cp-calculated-display">{{ data.cp.earned }}</div></div>
				<div class="col"><div class="cp-calculated-display">{{ data.cp.trained }}</div></div>
			</div>
		</section>
	</div>
		<!--			<section class="table">
				<div class="header-row">
					<div class="col">Games</div>
				</div>

				<div class="row">
					<div class="col">
					{{#each data.exp }}
						{{@index}}: <input class="input-number" type="number" name="blanket" value="{{ blanket }}">
					{{/each}}
					</div>
				</div>
			</section> -->
	</div> <!-- End of grid child-->
	</div> <!-- End of Character Points -->
	
	<div class="trait-points">
		<div class="gen-header">
			<div class="traits-header">Traits</div>
		</div>

	<div class="grid-child">
		<section class="table">
			<div class="header-row traits-header">
				<div class="col">
					{{#if_greater data.creation.traits data.cp.traits }}
						<div class="display-good">
							Creation : {{ data.creation.traits }}
						</div>
					{{/if_greater }}
				</div>
				<div class="col">Trait</div>
				<div class="col">Super</div>
				<div class="col">Total</div>
				<div class="col">Cost</div>
			</div>

			{{#each data.traitParts as |trait id|}}
			<div class="row">
				<div class="col">{{ trait.name }}</div>
				<div class="col"><input class="input-number" type="number" name="data.traitParts.{{id}}.base" value="{{ trait.base }}"></div>
				<div class="col"><input class="input-number" type="number" name="data.traitParts.{{id}}.super" value="{{ trait.super }}"></div>
				<div class="col">
					<div class="trait-calculated-display">{{ trait.total }}</div>
				</div>
				<div class="col">
					<div class="trait-calculated-display">{{ trait.cost }}</div>
				</div>
			</div>
			{{/each}}

			<div class="row">
				<div class="col-center-focus">TOTAL</div>
				<div class="col"></div>
				<div class="col"></div>
				<div class="col"></div>
				<div class="col">
					<div class="total-calculated-display">{{ data.cp.traits }}</div>
				</div>
			</div>
		</section>
	</div>
	</div>

	<div class="arcana-points">
		<div class="gen-header">
			<div class="arcana-header">Arcana</div>
		</div>
	<div class="grid-child">
		<section class="table">
			<div class="header-row arcana-header">
				<div class="col">
					{{#if_greater data.creation.arcana data.cp.arcana }}
						<div class="display-good">
							Creation : {{ data.creation.arcana }}
						</div>
					{{/if_greater }}
				</div>
				<div class="col">Arcana</div>
				<div class="col">Super</div>
				<div class="col">Total</div>
				<div class="col">Cost</div>
			</div>
			

			{{#each data.arcana as |sphere id|}}
			<div class="row">
				<div class="col">{{ name }}</div>
				<div class="col">
					<input name="data.arcana.{{id}}.base" value="{{ sphere.base }}" class="input-number" type="number">
				</div>
				<div class="col">
					<input name="data.arcana.{{id}}.super" value="{{ sphere.super }}" class="input-number" type="number">
				</div>
				<div class="col">
					<div class="arcana-calculated-display">{{ sphere.total }}</div>
				</div>
				<div class="col">
					<div class="arcana-calculated-display">{{ sphere.cost }}</div>
				</div>
			</div>
			{{/each}}

			<div class="row">
				<div class="col-center-focus">TOTAL</div>
				<div class="col"></div>
				<div class="col"></div>
				<div class="col"></div>
				<div class="col">
					<div class="total-calculated-display">{{ data.cp.arcana }}</div>
				</div>
			</div>
		</section>
	</div>
	</div>
	
	<div class="skill-points">
		<div class="gen-header">
			<div class="skills-header">Skills</div>
		</div>
		

	<div class="grid-child">
	<div>
	{{#if_greater data.creation.skills data.cp.skills }}
		<div class="display-good">
			Creation : {{ data.creation.skills }}
		</div>
	{{/if_greater }}
	</div>
	<div class="flex-row">
		<div class="flex2">
		<section class="table">
			<div class="header-row skills-header">
				<div class="col">Grit</div>
				<div class="col">Trait</div>
				<div class="col">Skill</div>
				<div class="col">Super</div>
				<div class="col">Total</div>
				<div class="col">Tier</div>
				<div class="col">Cost</div>
			</div>

			{{#each data.skills.grit as |skill id|}}
			<div class="row">
				<div class="col">{{ skill.name }}</div>
				<div class="col">{{ skill.trait }}</div>
				<div class="col">
					<input class="input-number" type="number" name="data.skills.grit.{{id}}.base" value="{{ skill.base }}">
				</div>
				<div class="col">
					<input class="input-number" type="number" name="data.skills.grit.{{id}}.super" value="{{ skill.super }}">
				</div>
				<div class="col">
					<div class="skill-calculated-display">{{ skill.total }}</div>
				</div>
				<div class="col">{{ skill.tier }}</div>
				<div class="col">
					<div class="skill-calculated-display">{{ skill.cost }}</div>
				</div>
			</div>
			{{/each}}
		</section>

		<div>&nbsp;</div>

		<section class="table">
			<div class="header-row skills-header">
				<div class="col">Cunning</div>
				<div class="col">Trait</div>
				<div class="col">Skill</div>
				<div class="col">Super</div>
				<div class="col">Total</div>
				<div class="col">Tier</div>
				<div class="col">Cost</div>
			</div>

			{{#each data.skills.cunning as |skill id|}}
			<div class="row">
				<div class="col">{{ skill.name }}</div>
				<div class="col">{{ skill.trait }}</div>
				<div class="col">
					<input class="input-number" type="number" name="data.skills.cunning.{{id}}.base" value="{{ skill.base }}">
				</div>
				<div class="col">
					<input class="input-number" type="number" name="data.skills.cunning.{{id}}.super"  value="{{ skill.super }}">
				</div>
				<div class="col">
					<div class="skill-calculated-display">{{ skill.total }}</div>
				</div>
				<div class="col">{{ skill.tier }}</div>
				<div class="col">
					<div class="skill-calculated-display">{{ skill.cost }}</div>
				</div>
			</div>
			{{/each}}

			<div class="row">
				<div class="col-center-focus">TOTAL</div>
				<div class="col"></div>
				<div class="col"></div>
				<div class="col"></div>
				<div class="col"></div>
				<div class="col"></div>
				<div class="col">
					<div class="total-calculated-display">{{ data.cp.skills }}</div>
				</div>
			</div>
		</section>

		</div> <!-- End of left column-->

		<div class="flex2">
		<section class="table">
			<div class="header-row skills-header">
				<div class="col">Will</div>
				<div class="col">Trait</div>
				<div class="col">Skill</div>
				<div class="col">Super</div>
				<div class="col">Total</div>
				<div class="col">Tier</div>
				<div class="col">Cost</div>
			</div>

			{{#each data.skills.will as |skill id| }}
			<div class="row">
				<div class="col">{{ skill.name }}</div>
				<div class="col">{{ skill.trait }}</div>
				<div class="col">
					<input class="input-number" type="number" name="data.skills.will.{{id}}.base" value="{{ skill.base }}">
				</div>
				<div class="col">
					<input class="input-number" type="number" name="data.skills.will.{{id}}.super" value="{{ skill.super }}">
				</div>
				<div class="col">
					<div class="skill-calculated-display">{{ skill.total }}</div>
				</div>
				<div class="col">{{ skill.tier }}</div>
				<div class="col">
					<div class="skill-calculated-display">{{ skill.cost }}</div>
				</div>
			</div>
			{{/each}}
		</section>

		<div>&nbsp;</div>

		<section class="table">
			<div class="header-row skills-header">
				<div class="col"></div>
				<div class="col">
					Specializations
				</div>
			</div>

			<div class="row">
				<div class="col">Cosmology</div>
				<div class="col">
					<textarea name="data.spec.cosmology" class="input-text textarea-small">{{ data.spec.cosmology }}</textarea>
				</div>
			</div>

			<div class="row">
				<div class="col">Occult</div>
				<div class="col">
					<textarea name="data.spec.occult" class="input-text textarea-small">{{ data.spec.occult }}</textarea>
				</div>
			</div>

			<div class="row">
				<div class="col">Academics</div>
				<div class="col">
					<textarea name="data.spec.academics" class="input-text textarea-small">{{ data.spec.academics }}</textarea>
				</div>
			</div>

			<div class="row">
				<div class="col">Survival</div>
				<div class="col">
					<textarea name="data.spec.survival" class="input-text textarea-small">{{ data.spec.survival }}</textarea>
				</div>
			</div>

			<div class="row">
				<div class="col">Craft</div>
				<div class="col">
					<textarea name="data.spec.craft" class="input-text textarea-small">{{ data.spec.craft }}</textarea>
				</div>
			</div>
		</section>

		</div>
	
	</div>
	</div>
		
	</div>
</div> <!-- End of Development -->
{{/if_equal}}

</form>